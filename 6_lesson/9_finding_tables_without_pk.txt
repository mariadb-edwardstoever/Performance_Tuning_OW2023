# IN MARIADB SUPPORT, WE RECOMMEND THAT TABLES HAVE PRIMARY KEYS
# THIS IS ESPECIALLY TRUE FOR TABLES FREQUENTLY QUERIED IN A 
# PRODUCTION ENVIRONMENT.
# THIS IS EVEN MORE IMPORTANT WHEN THE DATABASE IS A GALERA CLUSTER

# USE THIS QUERY TO FIND TABLES WITHOUT PRIMARY KEYS

SELECT t.TABLE_SCHEMA, t.TABLE_NAME
FROM information_schema.TABLES AS t
LEFT JOIN information_schema.KEY_COLUMN_USAGE AS c 
ON t.TABLE_SCHEMA = c.CONSTRAINT_SCHEMA
   AND t.TABLE_NAME = c.TABLE_NAME
   AND c.CONSTRAINT_NAME = 'PRIMARY'
WHERE t.TABLE_SCHEMA != 'information_schema'
   AND t.TABLE_SCHEMA != 'performance_schema'
   AND t.TABLE_SCHEMA != 'mysql'
   AND t.TABLE_SCHEMA != 'sys'
   AND t.TABLE_TYPE != 'view'
   AND t.ENGINE != 'Columnstore'
   AND c.CONSTRAINT_NAME IS NULL;

